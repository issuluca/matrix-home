<!doctype html>
<html lang="it">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Matrix Home - Login</title>
<style>
  body { margin:0; background:#000; color:#00cc66; font-family: monospace; height:100vh; display:flex; align-items:center; justify-content:center; }
  #box { width:420px; padding:20px; border:1px solid rgba(0,204,102,0.3); box-shadow:0 0 10px rgba(0,204,102,0.05); }
  h1 { text-align:center; margin:0 0 12px; text-shadow:0 0 8px rgba(0,204,102,0.3); }
  label { display:block; margin-top:8px; color:#00cc66; }
  input { width:100%; padding:8px; margin-top:6px; background:transparent; border:1px solid rgba(0,204,102,0.25); color:#00ff99; font-family:monospace; }
  button { margin-top:12px; width:100%; padding:10px; background:rgba(0,204,102,0.12); border:1px solid #00cc66; color:#000; cursor:pointer; }
  .err { color:#ff6666; margin-top:8px; text-align:center; }
  .note { font-size:12px; color:#00cc66aa; margin-top:6px; text-align:center; }
</style>
</head>
<body>
  <div id="box">
    <h1>Matrix Home â€” Login</h1>
    <label>Username<input id="user" autocomplete="username"></label>
    <label>Password<input id="pass" type="password" autocomplete="current-password"></label>
    <label style="font-size:13px;"><input id="remember" type="checkbox"> Ricorda sessione</label>
    <button id="btn">Accedi</button>
    <div id="err" class="err" style="display:none"></div>
    <div class="note">Usa credenziali amministratore per accedere al pannello.</div>
  </div>

<script>
document.getElementById('btn').addEventListener('click', async ()=>{
  const user = document.getElementById('user').value;
  const pass = document.getElementById('pass').value;
  const remember = document.getElementById('remember').checked;
  const res = await fetch('/login', {
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body: JSON.stringify({ user, pass, remember })
  });
  if (res.ok) {
    window.location = '/';
  } else {
    const j = await res.json().catch(()=>({error:'error'}));
    const err = document.getElementById('err');
    err.style.display='block';
    err.textContent = j.error || 'Accesso negato';
    setTimeout(()=> err.style.display='none',4000);
  }
});
</script>
</body>
</html>
